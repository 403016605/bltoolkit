<html>

<head>
<META http-equiv="Content-Type" content="text/html">
<meta name="vs_targetSchema" content="http://schemas.microsoft.com/intellisense/ie5">
<title>Rsdn.Framework.Data</title>
<meta http-equiv='Content-Type' content='text/html; charset=windows-1251'>
<link rel="stylesheet" type="text/css" href="MSDN.css">
<link rel="stylesheet" type="text/css" href="RSDN.css">
<link rel="stylesheet" type="text/css" href="doc\MSDN.css">
<link rel="stylesheet" type="text/css" href="doc\RSDN.css">
</head>

<body id="bodyID" class="dtBODY">

<div id="nsbanner">

<div id="bannerrow1">
<table class="bannerparthead" cellspacing="0">
<tr id="hdr">
<td class="runninghead">The Rsdn.Framework.Data namespace</td>
<td class="product"></td>
</tr>
</table>
</div>

<div id="TitleRow"><h1 class="dtH1">Rsdn.Framework.Data Namespace</h1></div>

</div>

<div id="nstext">

<p>
The <a href="Rsdn.Framework.Data.html">Rsdn.Framework.Data</a> is a namespace 
that represents a higher-level wrapper for ADO.NET.
<br>
<br>
The <a href="Rsdn.Framework.Data.html">Rsdn.Framework.Data</a> namespace implements the following features:
<ul>
<li>Support for different data providers.</li>
<li>Returning IDataReader, DataTable, DataSet, business entity objects, or single values..</li>
<li>Returning a list of business entity objects.</li>
<li>High performance relational data mapping to business entities.</li>
</ul>
</p>

<h3>Version 1.1 Fixes and Features</h3>
<h4>Features</h4>
<p>
<ul>
<li>
New <a href="Rsdn.Framework.Data.DbManager.ExecuteDictionary_overloads.html">DbManager.ExecuteDictionary</a> method<br>
The method executes a query and returns the <b>Hashtable</b> of business entities.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.Map.ToDictionary_overloads.html">Map.ToDictionary</a> method<br>
The method maps data from/to <b>Hashtable</b> or an object that implements the <b>IDictionary</b> interface.
</li>
<li>
Support for <b>IDataReader</b> interface<br>
New overloaded versions of the 
<a href="Rsdn.Framework.Data.Mapping.Map.ToList_overloads.html">Map.ToList</a> and
<a href="Rsdn.Framework.Data.Mapping.Map.ToDictionary_overloads.html">Map.ToDictionary</a> methods
added to support mapping from/to the <b>IDataReader</b>.
</li>
<li>
Enhancement of the <a href="Rsdn.Framework.Data.Mapping.MapValueAttribute.html">MapValueAttribute</a> attribute<br>
Now the attribute can be applied to enumeration values.
<div class='tablediv'><table class='dtTABLE' cellspacing='0'><tr><td width='100%' nowrap class='c'><pre class="rsdncode"><span class='kw'>public enum</span> Status
{
    [MapValue(<span class='str'>"A"</span>)] Active,
    [MapValue(<span class='str'>"I"</span>)] Inactive,
    [MapValue(<span class='str'>"P"</span>)] Pending
}</pre></td></tr></table></div>
This is only way to define the attributes in Managed C++.
</li>
<li>
New 
<a href="Rsdn.Framework.Data.RsdnDbManagerException.html">RsdnDbManagerException</a> and
<a href="Rsdn.Framework.Data.Mapping.RsdnMapException.html">RsdnMapException</a> classes.<br>
All exceptions thrown by the library or used classes are wrapped in these exception classes and returned as inners.
</li>
</ul>

<h4>Fixes</h4>
<ul>
<li>
An exception occurs when attempting to add the <a href="Rsdn.Framework.Data.DbManager.html">DbManager</a> 
to a form.
</li>
</ul>
</p>


<h3>Version 1.2 Fixes and Features</h3>
<h4>Features</h4>
<p>
<ul>
<li>
The <i>MapData</i> class has been moved to the <a href="Rsdn.Framework.Data.Mapping.html">Rsdn.Framework.Data.Mapping</a>
 namespace and renamed to <a href="Rsdn.Framework.Data.Mapping.Map.html">Map</a>.</li>
<li>
Support for abstract classes added.<br>
Now it's possible to skip implementation of class properties and define read-only class members.
<div class='tablediv'><table class='dtTABLE' cellspacing='0'><tr><td width='100%' nowrap class='c'>
<pre class="rsdncode">
<span class='kw'>public abstract class</span> MyBizEntity
{
    <span class='kw'>public abstract int</span>    ID          { <span class='kw'>get</span>; }
    <span class='kw'>public abstract string</span> Description { <span class='kw'>get</span>; <span class='kw'>set</span>; }
}</pre></td></tr></table></div>
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.MapTypeAttribute.html">MapTypeAttribute</a> attribute.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.MapParameterAttribute.html">MapParameterAttribute</a> attribute.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.MapIgnoreAttribute.html">MapIgnoreAttribute</a> attribute.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.MapDescriptor.html">MapDescriptor</a> class.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.IMapObjectFactory.html">IMapObjectFactory</a> interface.
</li>
<li>
Enhancement of the <a href="Rsdn.Framework.Data.Mapping.MapFieldAttribute.html">MapFieldAttribute</a> attribute use.
</li>
<li>
Support for nullable types added.
</li>
<li>
Support for the Guid type added.
</li>
<li>
Xml schema mapping added.<br>
The <a href="Rsdn.Framework.Data.Mapping.SetMappingSchema_overloads.html">SetMappingSchema</a> method
can be used to assign default mapping schema.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.MapXmlAttribute.html">MapXmlAttribute</a> attribute.
</li>
</ul>

<h4>Fixes</h4>
<ul>
<li>
Couple of minor bugs has been fixed.
</li>
</ul>
</p>


<h3>Version 1.3 Fixes and Features<a name="v13"></a></h3>
<h4>Features</h4>
<p>
<ul>
<li>
New <a href="Rsdn.Framework.Data.DbManager.SetCommand_overloads.html">SetCommand</a> and <a href="Rsdn.Framework.Data.DbManager.SetCommand_overloads.html">SetSpCommand</a> methods.
</li>
<li>
New <a href="Rsdn.Framework.Data.DbManager.Update_overloads.html">Update</a> method.
</li>
<li>
Enhancement of the <a href="Rsdn.Framework.Data.Mapping.MapTypeAttribute.html">MapTypeAttribute</a> attribute.
</li>
<li>
Support for the <a href="ms-help://MS.NETFrameworkSDKv1.1/cpref/html/frlrfSystemComponentModelISupportInitializeClassTopic.htm">ISupportInitialize</a> attribute added.
</li>
<li>
New <a href="Rsdn.Framework.Data.Mapping.IMapSettable.html">IMapSettable</a> interface.
</li>
</ul>

<h4>Fixes</h4>
<ul><li>Not this time.</li></ul>
</p>

<h3>Known Problems</h3>
<p>
<ul>
<li>
During the abstract class mapping the mapper creates a derived class that implements abstract properties.
Obviously, the full name of the class is different from the original name. 
Name of the generated class is the following:
<div class='tablediv'><table class='dtTABLE' cellspacing='0'><tr><td width='100%' nowrap class='c'>
<pre class="rsdncode">
<i>NamespaceName.AbstractClassName</i>.MappingExtension.<i>AbstractClassName</i></pre></td></tr></table></div>

So, the <i>GetType().Name</i> method returns the same name for the original and derived classes.
The <i>GetType().FullName</i> method returns different ones.<br>
Also direct type comparison does not work correctly.
<div class='tablediv'><table class='dtTABLE' cellspacing='0'><tr><td width='100%' nowrap class='c'>
<pre class="rsdncode">
MyBizEntity entity = 
    MapDescriptor.GetDescriptor(<span class='kw'>typeof</span>(MyBizEntity)).CreateInstanceEx();

<span class='kw'>if</span> (entity.GetType() == <span class='kw'>typeof</span>(MyBizEntity)) {}  <span class='com'>// false</span>
<span class='kw'>if</span> (entity <span class='kw'>is</span> MyBizEntity) {}                    <span class='com'>// true</span></pre></td></tr></table></div>
</li>

<li>
As dynamic assemblies are generated in memory, they don't implement some methods and throw 
the <i>NonImplementedException</i> when the methods are addressed.
This issue can be solved by the explicit assembly type check.
<div class='tablediv'><table class='dtTABLE' cellspacing='0'><tr><td width='100%' nowrap class='c'>
<pre class="rsdncode">
<span class='kw'>foreach</span> (Assembly a <span class='kw'>in</span> AppDomain.CurrentDomain.GetAssemblies())
{
    <b><span class='kw'>if</span> (a <span class='kw'>is</span> System.Reflection.Emit.AssemblyBuilder)</b>
        <b>continue;</b>

    Console.WriteLine(a.CodeBase);
}</pre></td></tr></table></div>
</li>
</ul>
</p>


<hr>
<div id="footer"><p><a href="http://rfd.rsdn.ru">© 2002-2004 IT, rfd.rsdn.ru</a></p><p></p></div>

</div>

</body>
</html>